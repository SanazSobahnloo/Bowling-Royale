using System.Collections;
using System.Collections.Generic;
using UnityEngine.Playables;
using UnityEngine;

public class CinematicCameraController : MonoBehaviour
{
    public PlayableDirector cinematicTimeline; // Timeline ???? ???
    public Camera cinematicCamera; // ?????? ???????
    public Camera mainCamera; // ?????? ???? ????

    void Start()
    {
        // ????? ?????? ???? ?? ???? ? ??????? ?? ??????? ??
        mainCamera.enabled = true;
        cinematicCamera.enabled = false;

        // ????? ?? ???? ??
        StartCinematic();
    }

    public void StartCinematic()
    {
        // ???? ???? ?????? ???????
        cinematicCamera.enabled = true;
        mainCamera.enabled = false;

        // ???? Timeline
        cinematicTimeline.Play();

        // ??????? ???? ?????? ??????? ?? ?? ????? ?????
        StartCoroutine(EndCinematic((float)cinematicTimeline.duration));
    }

    private System.Collections.IEnumerator EndCinematic(float delay)
    {
        yield return new WaitForSeconds(delay);

        // ???? ???? ?????? ???? ? ??????? ???? ?????? ???????
        cinematicCamera.enabled = false;
        mainCamera.enabled = true;
    }
}
